# recipe_demo_ts.yml
---
documentation:
  title: CMUG demo (time series)

  description: |
    Time series of area averaged total cloud cover.

  authors:
    - lauer_axel

  maintainer:
    - lauer_axel


preprocessors:

  pp_global: &global_settings
#    regrid:
#      target_grid: 1x1
#      scheme: linear
    area_statistics:
      operator: mean
      fx_variables:
        areacella:

  pp_SouthernOcean:
    <<: *global_settings 
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: -65
      end_latitude: -30
    mask_landsea:
      mask_out: land


diagnostics:

  timeseries:
    description: lineplot monthly means
    variables:
      clt_so: &clt_settings
        short_name: clt
        preprocessor: pp_SouthernOcean
        mip: Amon
        reference_dataset: ESACCI-CLOUD
        additional_datasets: 
#          - {dataset: CLARA-AVHRR, project: OBS, type: sat, version: V002_01,
#             tier: 3, start_year: 1982, end_year: 2018, alias: a02_CLARA-AVHRR}
          - {dataset: ESACCI-CLOUD, project: OBS, type: sat,
             version: AVHRR-AMPM-fv3.0, tier: 2,
             start_year: 1992, end_year: 2016, alias: a04_ESACCI-CLOUD}
          - {dataset: MODIS, project: OBS, type: sat, version: MYD08-M3,
             tier: 3, start_year: 2003, end_year: 2018, alias: a08_MODIS}
#          - {dataset: PATMOS-x, project: OBS, type: sat, version: NOAA,
#             tier: 2, start_year: 1982, end_year: 2016, alias: a09_PATMOS-x}
          - {dataset: ERA5, project: native6, type: reanaly, version: 'v1', tier: 3,
             start_year: 1992, end_year: 2021, alias: r03_ERA5}
#      clt_itcz:
#        <<: *clt_settings
#        preprocessor: pp_ITCZPacific
#      clt_sep:
#        <<: *clt_settings
#        preprocessor: pp_SEPacific
#      clt_so:
#        <<: *clt_settings
#        preprocessor: pp_SouthernOcean
#      clt_tropics:
#        <<: *clt_settings
#        preprocessor: pp_Tropics
#      clt_stormtracks:
#        <<: *clt_settings
#        preprocessor: pp_StormTracks
    scripts:
#      ts_clt_global:
#        variable_group: clt_global
#        script: mpqb/mpqb_lineplot.py
#      ts_clt_itcz:
#        variable_group: clt_itcz
#        script: mpqb/mpqb_lineplot.py
#      ts_clt_sep:
#        variable_group: clt_sep
#        script: mpqb/mpqb_lineplot.py
      ts_clt_so:
        variable_group: clt_so
        script: mpqb/mpqb_lineplot.py
#      ts_clt_tropics:
#        variable_group: clt_tropics
#        script: mpqb/mpqb_lineplot.py
#      ts_clt_stormtracks:
#        variable_group: clt_stormtracks
#        script: mpqb/mpqb_lineplot.py
