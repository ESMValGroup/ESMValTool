---
documentation:
  description: |
    Recipe for evaluating models against ESACCI Sea Surface Salinity dataset

  authors:
    - vegas-regidor_javier

  maintainer:
    - vegas-regidor_javier

  references:
    - contact_authors

  projects:
    - cmug

preprocessors:
  timeseries:
    extract_shape:
      shapefile: /home/jvegas/World_Seas_IHO_v3/World_Seas_IHO_v3.shp
      decomposed: True
      method: contains
      crop: False
      ids:
        - Arctic Ocean
        - Southern Ocean
        - Mediterranean Sea - Eastern Basin
        - Mediterranean Sea - Western Basin
        - North Atlantic Ocean
        - South Atlantic Ocean
        - North Pacific Ocean
        - South Pacific Ocean
        - Indian Ocean
    area_statistics:
      operator: mean
      fx_variables:
        areacello: areacello

datasets:
  - {project: CMIP6, exp: historical, dataset: MPI-ESM1-2-HR, ensemble: r1i1p1f1,
      start_year: 1950, end_year: 2014}

diagnostics:
  compare_salinity:
    description: ESACCI-SEA-SURFACE-SALINITY check
    variables:
      sos:
        reference_dataset: ESACCI-SEA-SURFACE-SALINITY_V1
        preprocessor: timeseries
        mip: Omon
        grid: gn
    additional_datasets:
      - {dataset: ESACCI-SEA-SURFACE-SALINITY, project: OBS6, tier: 2,
          type: reanaly, version: fv1.8, start_year: 2010, end_year: 2018,
          alias: ESACCI-SEA-SURFACE-SALINITY_V1}
      - {dataset: ESACCI-SEA-SURFACE-SALINITY, project: OBS6,  tier: 2,
          type: reanaly, version: fv2.31, start_year: 2010, end_year: 2019,
          alias: ESACCI-SEA-SURFACE-SALINITY_V2}
    scripts:
      compare_salinity:
        script: sea_surface_salinity/compare_salinity.py