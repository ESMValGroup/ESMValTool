# ESMValTool
---
documentation:
  title: Histogram of precipitation.
  description: >
    Histogram of precipitation
  authors:
    - heuer_helge
    - bock_lisa
    - grundner_arthur
  maintainer:
    - bock_lisa


# Note: the following models are just examples
ICON_DATASET: &icon
  - {project: ICON, dataset: ICON, exp: ag_atm_amip_r2b5} # Problem with the grid references in the ICON files!
CMIP_DATASET: &cmip
  - {project: CMIP6, dataset: BCC-CSM2-MR, exp: historical, ensemble: r1i1p1f1, grid: gn}

# Note: for some observational datasets, we use preset time ranges due to
# their limited temporal availability
timerange_for_models: &time_period
  # timerange: '19920101/20140101'
  # timerange: '19820101/19820401'
  timerange: '19790101/19790401'


preprocessors:

  pp_hist:
    convert_units:
      units: mm day-1
    regrid:
      target_grid: 2x2
      scheme: linear

  pp_hist_icon:
    convert_units:
      units: mm day-1
    regrid:
      target_grid: 2x2
      scheme:
        reference: esmf_regrid.schemes:ESMFAreaWeighted


diagnostics:

  hist:
    description: Precipitation histogram.
    variables:
      pr:
        <<: *time_period
        preprocessor: pp_hist
        mip: day
        additional_datasets: *cmip
      pr_icon:
        <<: *time_period
        short_name: pr
        preprocessor: pp_hist_icon
        mip: day
        additional_datasets: *icon

    scripts: 
      histogram: 
        script: clouds/diffhist.py
        split_by: dataset
        plot_global: true
        plot_kwargs:
          alpha: 0.75
        plot_properties:
