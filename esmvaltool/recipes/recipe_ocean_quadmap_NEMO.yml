# ESMValTool
# recipe_ocean_quadmap.yml
---
documentation:
  title: Tool to produce a four pane map figure

  description: |
    Recipe to demonstrate the Diagnostic Maps quad.
    Based on the ocean assess/Marine Assess toolkit plots.

  authors:
    - demora_lee

  maintainer:
    - demora_lee

  references:
    - demora2018gmd

  projects:
    - ukesm


# datasets:
# working datasets
#  - {project: NEMO, dataset: GC3p1, suite: ar766, model: nemo, freq: 1y, grid: T, timerange: '185001/185112'}
#  - {project: NEMO, dataset: GC5, suite: cq317, model: nemo, freq: 1y, grid: T, timerange: '185001/185112'}
#  - {project: NEMO, dataset: GC5, suite: cp656, model: nemo, freq: 1y, grid: T, timerange: '199501/200501'}
#  - {project: NEMO, dataset: GC3p1, suite: co957, model: nemo, freq: 1y, grid: T, timerange: '199501/200501'}
preprocessors:
  prep_quad_map:  # For Global 2D fields
    extract_time:
      start_year: 1995
      start_month: 1
      start_day: 1
      end_year: 2004
      end_month: 12
      end_day: 31
    climate_statistics:
      operator: mean


diagnostics:
  # --------------------------------------------------
  # Quad Maps diagnostics
  # -----------------------------------------------
  diag_map_1:
    description: Global surface quad plots
    variables:
      tos:  # Temperature ocean surface
        preprocessor: prep_quad_map
        mip: Omon
        additional_datasets:
          - {project: NEMO, dataset: GC5, suite: cp656, model: nemo, freq: 1y, grid: T, timerange: '199501/200501'}
          - {project: NEMO, dataset: GC3p1, suite: co957, model: nemo, freq: 1y, grid: T, timerange: '199501/200501'}
      tos_obs:
        mip: Omon
        short_name: tos
        additional_datasets:
          - {project: OBS2, dataset: observation, suite: CCI_SST, model: nemo, freq: annualmean, grid: T}
    scripts:
      Global_Ocean_map: &Global_Ocean_map
        script: ocean/diagnostic_maps_quad.py
        control_model: {project: NEMO, dataset: GC5}
        exper_model: {project: NEMO, dataset: GC3p1}
        observational_dataset: {project: OBS2, dataset: observation}

  diag_map_2:
    description: Global surface quad plots sos
    variables:
      sos:
        preprocessor: prep_quad_map
        mip: Omon
        additional_datasets:
          - {project: NEMO, dataset: GC5, suite: cp656, model: nemo, freq: 1y, grid: T, timerange: '199501/200501'}
          - {project: NEMO, dataset: GC3p1, suite: co957, model: nemo, freq: 1y, grid: T, timerange: '199501/200501'}
      sos_obs:
        mip: Omon
        short_name: sos
        additional_datasets:
          - {project: OBS3, dataset: observation, suite: EN4_v1.1, model: nemo, freq: annualmean, grid: T}
    scripts:
      Global_Ocean_map:  # &Global_Ocean_map SOS
        script: ocean/diagnostic_maps_quad_sos.py
        control_model: {project: NEMO, dataset: GC5}
        exper_model: {project: NEMO, dataset: GC3p1}
        observational_dataset: {project: OBS3, dataset: observation}
