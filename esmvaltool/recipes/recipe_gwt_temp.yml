# ESMValTool
# recipe_gwt_temp.yml
---
documentation:
  description: |
    Recipe to calcualte threshold years for UKESM Global warming thresholds.

  authors:
    - demora_lee

  maintainer:
    - demora_lee

  references:
    - demora2018gmd

  projects:
    - ukesm


preprocessors:
  prep_1:
    area_statistics:
      operator: mean
    annual_statistics:
      operator: mean


diagnostics:
  # --------------------------------------------------
  # Time series diagnostics
  # --------------------------------------------------
  diag_timeseries:
    variables:
      tas:
        preprocessor: prep_1
        additional_datasets:
        # /data/sthenno1/scratch/ledm/CMIP6/tas
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp119], ensemble: r1i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp126], ensemble: r1i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp245], ensemble: r1i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp370], ensemble: r1i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp434], ensemble: r1i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp585], ensemble: r1i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp534-over], ensemble: r1i1p1f2, start_year: 1850, end_year: 2100, grid: gn}

        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp119], ensemble: r2i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp126], ensemble: r2i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp245], ensemble: r2i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp370], ensemble: r2i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp434], ensemble: r2i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp585], ensemble: r2i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp534-over], ensemble: r2i1p1f2, start_year: 1850, end_year: 2100, grid: gn}

          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp119], ensemble: r3i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp126], ensemble: r3i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp245], ensemble: r3i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp370], ensemble: r3i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp434], ensemble: r3i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp585], ensemble: r3i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp534-over], ensemble: r3i1p1f2, start_year: 1850, end_year: 2100, grid: gn}

          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp119], ensemble: r4i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp126], ensemble: r4i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp245], ensemble: r4i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp370], ensemble: r4i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp434], ensemble: r4i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp585], ensemble: r4i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp534-over], ensemble: r4i1p1f2, start_year: 1850, end_year: 2100, grid: gn}

        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp119], ensemble: r8i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp126], ensemble: r8i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp245], ensemble: r8i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp370], ensemble: r8i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp434], ensemble: r8i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
          - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp585], ensemble: r8i1p1f2, start_year: 1850, end_year: 2100, grid: gn}
        #   - {dataset: UKESM1-0-LL, project: CMIP6, mip: Amon, exp: [historical, ssp534-over], ensemble: r8i1p1f2, start_year: 1850, end_year: 2100, grid: gn}

    scripts:
      GWT_times_series:
        script: ocean/diagnostic_gwt_timeseries.py
        moving_average: 21 years
        anomaly: [1850, 1900]
