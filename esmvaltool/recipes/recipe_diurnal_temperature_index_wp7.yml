###############################################################################
# namelist_diurnal_temperature_index.yml
#
# Description
# Namelist for computing the  diurnal temperature indicator.
#
# Authors
# Alasdair Hunter (BSC, Spain)
# Nicolau Manubens (BSC, Spain)
# Louis-Philippe  (BSC, Spain)
#
# Project
# C3S Magic
#
#Reference
#http://secif.ipsl.fr/images/SECIF/documents/Communication/fiche_invulnerable/RC_indicateur_EN.pdf
#
# This namelist is part of the ESMValTool
###############################################################################
---

datasets:
  #- {dataset: bcc-csm1-1,  type: exp, project: CMIP5,  mip: Amon,  exp: historical,  ensemble: r1i1p1,  start_year: 1960,  end_year: 1990}
  #- {dataset: bcc-csm1-1,  type: exp, project: CMIP5,  mip: Amon,  exp: historical,  ensemble: r1i1p1,  start_year: 1991,  end_year: 1995}
  #- {dataset: bcc-csm1-1,  type: exp, project: CMIP5,  mip: Amon,  exp: historical,  ensemble: r1i1p1,  start_year: 2000,  end_year: 2004}
  - {dataset: IPSL-CM5A-LR, type: exp, project: CMIP5,  mip: day,  exp: historical,  ensemble: r1i1p1,  start_year: 1988,  end_year: 1990}
  - {dataset: IPSL-CM5A-LR, type: exp,  project: CMIP5,  mip: day,  exp: rcp85,  ensemble: r1i1p1,  start_year: 2020,  end_year: 2022}
 # - {dataset: IPSL-CM5A-LR, type: exp,  project: CMIP5,  mip: day,  exp: rcp26,  ensemble: r1i1p1,  start_year: 2020,  end_year: 2040}

latlon_roi: (/latmin,latmax,lonmin,lonmax/)
preprocessors:
  preproc:
    regrid:
      target_grid: IPSL-CM5A-LR
      scheme: linear
    mask_fillvalues:
      threshold_fraction: 0.95
    extract_region:
      start_longitude: -10
      end_longitude: 40
      start_latitude: 27
      end_latitude: 70

diagnostics:
  diurnal_temperature_indicator:
    description: Calculate the diurnal temperature indicator.
    variables:
      tasmax:
        preprocessor: preproc
        mip: day
        field: T2M
      tasmin:
        preprocessor: preproc
        mip: day
        field: T2M
    scripts:
      main:
        script: magic_bsc/diurnal_temp_index.r #(in diag_scripts/bsc_magic)


