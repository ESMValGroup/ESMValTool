# ESMValTool
# recipe_gwt_chl.yml
---
documentation:
  description: |
    Recipe to calcualte multi years means for UKESM Global warming thresholds
    (chl).

  authors:
    - demora_lee

  maintainer:
    - demora_lee

  references:
    - demora2018gmd

  projects:
    - ukesm


preprocessors:
  prep_1:
    custom_order: true
#    extract_levels:
#      levels:  [0., ]
#      scheme: nearest_horizontal_extrapolate_vertical
    climate_statistics:
      operator: mean
      period: full
    extract_levels:
      levels:  [0., ]
      scheme: nearest_horizontal_extrapolate_vertical
        
    # multi_model_statistics:
    #   span: full
    #   statistics: [mean ]


diagnostics:
  # --------------------------------------------------
  # Time series diagnostics
  # --------------------------------------------------
  diag_chl:
    variables:
      # Procedurally generated recipe contents:
      chl_historical:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: historical, ensemble: r1i1p1f2, start_year: 1850, end_year: 1900, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: historical, ensemble: r2i1p1f2, start_year: 1850, end_year: 1900, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: historical, ensemble: r3i1p1f2, start_year: 1850, end_year: 1900, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: historical, ensemble: r4i1p1f2, start_year: 1850, end_year: 1900, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: historical, ensemble: r8i1p1f2, start_year: 1850, end_year: 1900, grid: gn}

      chl_ssp119_1.5:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp119], ensemble: r1i1p1f2, start_year: 2015, end_year: 2035, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp119], ensemble: r3i1p1f2, start_year: 2013, end_year: 2033, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp119], ensemble: r4i1p1f2, start_year: 2017, end_year: 2037, grid: gn}

      chl_ssp119_2.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp119], ensemble: r1i1p1f2, start_year: 2030, end_year: 2050, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp119], ensemble: r3i1p1f2, start_year: 2028, end_year: 2048, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp119], ensemble: r4i1p1f2, start_year: 2030, end_year: 2050, grid: gn}

      chl_ssp126_1.5:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r1i1p1f2, start_year: 2014, end_year: 2034, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r2i1p1f2, start_year: 2018, end_year: 2038, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r3i1p1f2, start_year: 2015, end_year: 2035, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r4i1p1f2, start_year: 2019, end_year: 2039, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r8i1p1f2, start_year: 2011, end_year: 2031, grid: gn}

      chl_ssp126_2.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r1i1p1f2, start_year: 2027, end_year: 2047, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r2i1p1f2, start_year: 2029, end_year: 2049, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r3i1p1f2, start_year: 2027, end_year: 2047, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r4i1p1f2, start_year: 2031, end_year: 2051, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp126], ensemble: r8i1p1f2, start_year: 2023, end_year: 2043, grid: gn}

      chl_ssp245_1.5:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r1i1p1f2, start_year: 2014, end_year: 2034, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r2i1p1f2, start_year: 2014, end_year: 2034, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r3i1p1f2, start_year: 2013, end_year: 2033, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r4i1p1f2, start_year: 2018, end_year: 2038, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r8i1p1f2, start_year: 2011, end_year: 2031, grid: gn}

      chl_ssp245_2.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r1i1p1f2, start_year: 2025, end_year: 2045, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r2i1p1f2, start_year: 2023, end_year: 2043, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r3i1p1f2, start_year: 2025, end_year: 2045, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r4i1p1f2, start_year: 2027, end_year: 2047, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r8i1p1f2, start_year: 2021, end_year: 2041, grid: gn}

      chl_ssp245_3.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r1i1p1f2, start_year: 2050, end_year: 2070, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r2i1p1f2, start_year: 2045, end_year: 2065, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r3i1p1f2, start_year: 2046, end_year: 2066, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r4i1p1f2, start_year: 2048, end_year: 2068, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp245], ensemble: r8i1p1f2, start_year: 2045, end_year: 2065, grid: gn}

      chl_ssp370_1.5:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r1i1p1f2, start_year: 2014, end_year: 2034, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r2i1p1f2, start_year: 2016, end_year: 2036, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r3i1p1f2, start_year: 2014, end_year: 2034, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r4i1p1f2, start_year: 2017, end_year: 2037, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r8i1p1f2, start_year: 2012, end_year: 2032, grid: gn}

      chl_ssp370_2.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r1i1p1f2, start_year: 2022, end_year: 2042, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r2i1p1f2, start_year: 2025, end_year: 2045, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r3i1p1f2, start_year: 2024, end_year: 2044, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r4i1p1f2, start_year: 2026, end_year: 2046, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r8i1p1f2, start_year: 2022, end_year: 2042, grid: gn}

      chl_ssp370_3.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r1i1p1f2, start_year: 2041, end_year: 2061, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r2i1p1f2, start_year: 2042, end_year: 2062, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r3i1p1f2, start_year: 2043, end_year: 2063, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r4i1p1f2, start_year: 2044, end_year: 2064, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r8i1p1f2, start_year: 2041, end_year: 2061, grid: gn}

      chl_ssp370_4.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r1i1p1f2, start_year: 2060, end_year: 2080, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r2i1p1f2, start_year: 2058, end_year: 2078, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r3i1p1f2, start_year: 2059, end_year: 2079, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r4i1p1f2, start_year: 2060, end_year: 2080, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r8i1p1f2, start_year: 2058, end_year: 2078, grid: gn}

      chl_ssp370_5.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r1i1p1f2, start_year: 2075, end_year: 2095, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r2i1p1f2, start_year: 2073, end_year: 2093, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r3i1p1f2, start_year: 2072, end_year: 2092, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r4i1p1f2, start_year: 2075, end_year: 2095, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp370], ensemble: r8i1p1f2, start_year: 2073, end_year: 2093, grid: gn}

      chl_ssp434_1.5:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r1i1p1f2, start_year: 2015, end_year: 2035, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r2i1p1f2, start_year: 2014, end_year: 2034, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r3i1p1f2, start_year: 2014, end_year: 2034, grid: gn}

      chl_ssp434_2.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r1i1p1f2, start_year: 2024, end_year: 2044, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r2i1p1f2, start_year: 2024, end_year: 2044, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r3i1p1f2, start_year: 2026, end_year: 2046, grid: gn}

      chl_ssp434_3.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r1i1p1f2, start_year: 2053, end_year: 2073, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r2i1p1f2, start_year: 2052, end_year: 2072, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp434], ensemble: r3i1p1f2, start_year: 2051, end_year: 2071, grid: gn}

      chl_ssp585_1.5:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r1i1p1f2, start_year: 2014, end_year: 2034, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r2i1p1f2, start_year: 2015, end_year: 2035, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r3i1p1f2, start_year: 2013, end_year: 2033, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r4i1p1f2, start_year: 2016, end_year: 2036, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r8i1p1f2, start_year: 2011, end_year: 2031, grid: gn}

      chl_ssp585_2.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r1i1p1f2, start_year: 2022, end_year: 2042, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r2i1p1f2, start_year: 2023, end_year: 2043, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r3i1p1f2, start_year: 2022, end_year: 2042, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r4i1p1f2, start_year: 2024, end_year: 2044, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r8i1p1f2, start_year: 2021, end_year: 2041, grid: gn}

      chl_ssp585_3.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r1i1p1f2, start_year: 2037, end_year: 2057, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r2i1p1f2, start_year: 2037, end_year: 2057, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r3i1p1f2, start_year: 2037, end_year: 2057, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r4i1p1f2, start_year: 2039, end_year: 2059, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r8i1p1f2, start_year: 2037, end_year: 2057, grid: gn}

      chl_ssp585_4.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r1i1p1f2, start_year: 2051, end_year: 2071, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r2i1p1f2, start_year: 2051, end_year: 2071, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r3i1p1f2, start_year: 2051, end_year: 2071, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r4i1p1f2, start_year: 2052, end_year: 2072, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r8i1p1f2, start_year: 2052, end_year: 2072, grid: gn}

      chl_ssp585_5.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r1i1p1f2, start_year: 2063, end_year: 2083, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r2i1p1f2, start_year: 2064, end_year: 2084, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r3i1p1f2, start_year: 2064, end_year: 2084, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r4i1p1f2, start_year: 2064, end_year: 2084, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r8i1p1f2, start_year: 2064, end_year: 2084, grid: gn}

      chl_ssp585_6.0:
        short_name: chl
        preprocessor: prep_1
        additional_datasets:
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r1i1p1f2, start_year: 2076, end_year: 2096, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r2i1p1f2, start_year: 2076, end_year: 2096, grid: gn}
         - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r3i1p1f2, start_year: 2076, end_year: 2096, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r4i1p1f2, start_year: 2076, end_year: 2096, grid: gn}
        #  - {dataset: UKESM1-0-LL, project: CMIP6, mip: Omon, exp: [historical, ssp585], ensemble: r8i1p1f2, start_year: 2076, end_year: 2096, grid: gn}

    scripts:
      diag_maps_chl:
        script: ocean/diagnostic_maps_gwt.py
