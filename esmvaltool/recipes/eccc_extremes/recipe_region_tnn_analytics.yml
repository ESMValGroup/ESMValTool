# ESMValTool
# recipe_bc_extremes_txx.yml
---
documentation:

  title: GEVs 2021 BC heatwave

  description: This is a recipe for doing model evaluation for .

  authors:
    - malinina_elizaveta

preprocessors:
  preproc_model:
    custom_order: True
    regrid:
      target_grid: 0.5x0.5
      lon_offset: 0.25
      lat_offset: 0.25
      scheme: linear    
    extract_shape:
      shapefile: Stone_regions_WRAF05_v4_1_Canada.shp
      method: contains
      crop: True
      ids:
        ID:
          - Alberta
    area_statistics:
      operator: mean
    seasonal_statistics:
      seasons: [SONDJFMAMJ, JA]
      operator: min
    annual_statistics:
      operator: min
    anomalies:
      period: full
      reference:
        start_year: 1981
        start_month: 1
        start_day: 1
        end_year: 2010
        end_month: 12
        end_day: 31

  preproc_era:
    custom_order: True  
    extract_shape:
      shapefile: Stone_regions_WRAF05_v4_1_Canada.shp
      method: contains
      crop: True
      ids:
        ID:
          - Alberta
    area_statistics:
      operator: mean 
    seasonal_statistics:
      seasons: [SONDJFMAMJ, JA]
      operator: min
    annual_statistics:
      operator: min
    anomalies:
      period: full
      reference:
        start_year: 1981
        start_month: 1
        start_day: 1
        end_year: 2010
        end_month: 12
        end_day: 31

datasets_cmip: &datasets_cmip
  - {dataset: ACCESS-CM2, institute: CSIRO-ARCCSS, ensemble: r(1:10)i1p1f1, grid: gn}
  - {dataset: ACCESS-ESM1-5, institute: CSIRO, ensemble: r(1:40)i1p1f1, grid: gn}
  - {dataset: AWI-CM-1-1-MR, institute: AWI, ensemble: r1i1p1f1, grid: gn}
  - {dataset: BCC-CSM2-MR, institute: BCC, ensemble: r1i1p1f1, grid: gn}
  - {dataset: CanESM5, institute: CCCma, ensemble: r(1:25)i1p1f1, grid: gn}
  - {dataset: CanESM5, institute: CCCma, ensemble: r(1:25)i1p2f1, grid: gn}
  - {dataset: CanESM5-1, institute: CCCma, ensemble: r1i1p(1:2)f1, grid: gn}
  - {dataset: CNRM-CM6-1, ensemble: r1i1p1f2, grid: gr}
  - {dataset: CNRM-ESM2-1, ensemble: r1i1p1f2, grid: gr}
  - {dataset: CMCC-ESM2, ensemble: r1i1p1f1, grid: gn}
  - {dataset: EC-Earth3, ensemble: r1i1p1f1, grid: gr}
  - {dataset: EC-Earth3, ensemble: r4i1p1f1, grid: gr}
  - {dataset: EC-Earth3, ensemble: r(6:7)i1p1f1, grid: gr}
  - {dataset: EC-Earth3, ensemble: r(9:10)i1p1f1, grid: gr}
  - {dataset: EC-Earth3-Veg, ensemble: r1i1p1f1, grid: gr}
  - {dataset: EC-Earth3-Veg, ensemble: r3i1p1f1, grid: gr}
  - {dataset: EC-Earth3-Veg, ensemble: r5i1p1f1, grid: gr}
  - {dataset: EC-Earth3-Veg-LR, ensemble: r(1:3)i1p1f1, grid: gr}
  - {dataset: FGOALS-g3, institute: CAS, ensemble: r1i1p1f1, grid: gn}
  - {dataset: FGOALS-g3, institute: CAS, ensemble: r3i1p1f1, grid: gn}
  - {dataset: GFDL-ESM4, institute: NOAA-GFDL, ensemble: r1i1p1f1, grid: gr1}
  - {dataset: GFDL-CM4, institute: NOAA-GFDL, ensemble: r1i1p1f1, grid: gr1}
  - {dataset: HadGEM3-GC31-LL, institution: MOHC, ensemble: r(1:5)i1p1f3, grid: gn} 
  - {dataset: INM-CM4-8, institute: INM, ensemble: r1i1p1f1, grid: gr1}
  - {dataset: INM-CM5-0, institute: INM, ensemble: r1i1p1f1, grid: gr1}
  - {dataset: IPSL-CM6A-LR, institute: IPSL, ensemble: r(1:6)i1p1f1, grid: gr}
  - {dataset: IPSL-CM6A-LR, institute: IPSL, ensemble: r(10:11)i1p1f1, grid: gr}
  - {dataset: IPSL-CM6A-LR, institute: IPSL, ensemble: r14i1p1f1, grid: gr}
  - {dataset: IPSL-CM6A-LR, institute: IPSL, ensemble: r22i1p1f1, grid: gr}
  - {dataset: IPSL-CM6A-LR, institute: IPSL, ensemble: r25i1p1f1, grid: gr}
  - {dataset: KACE-1-0-G, ensemble: r(1:3)i1p1f1, grid: gr}
  - {dataset: MIROC6, institute: MIROC, ensemble: r(1:50)i1p1f1, grid: gn}
  - {dataset: MIROC-ES2L, institute: MIROC, ensemble: r1i1p1f2, grid: gn}
  - {dataset: MPI-ESM1-2-LR, institute: MPI-M, ensemble: r(1:49)i1p1f1, grid: gn} 
  - {dataset: MPI-ESM1-2-HR, ensemble: r(1:2)i1p1f1, grid: gn} 
  - {dataset: MRI-ESM2-0, institute: MRI, ensemble: r(1:5)i1p1f1, grid: gn}
  - {dataset: NESM3, ensemble: r1i1p1f1, grid: gn}
  - {dataset: NorESM2-LM, institute: NCC, ensemble: r(2:3)i1p1f1, grid: gn}
  - {dataset: NorESM2-MM, institute: NCC, ensemble: r(1:2)i1p1f1, grid: gn}
  - {dataset: TaiESM1, institute: AS-RCEC, ensemble: r1i1p1f1, grid: gn}  
  - {dataset: UKESM1-0-LL, ensemble: r(1:4)i1p1f2, grid: gn}  
  - {dataset: UKESM1-0-LL, ensemble: r(9:12)i1p1f2, grid: gn}  
  - {dataset: UKESM1-0-LL, ensemble: r(16:19)i1p1f2, grid: gn}  

dataset_era: &dataset_era
  - {dataset: ERA5, project: OBS6, type: reanaly, version: v1, tier: 3}

diagnostics:
  analytics:
    description: Figure for BC extremes
    variables:
      txnx_all:
        short_name: tasmin
        exp: [historical, ssp245]
        timerange: '19410901/20230630'
        mip: day
        project: CMIP6
        preprocessor: preproc_model
        additional_datasets: *datasets_cmip
      reference: 
        short_name: tasmin
        timerange: '19410901/20230630'
        mip: day
        preprocessor: preproc_era
        additional_datasets: *dataset_era
    scripts:
      timeseries:
        script: eccc_extremes/simple_timeseries.py
        mpl_style: malinina24
        color_style: malinina24
        model_weighting: False
        units: C
        region: Alberta # needed for the figure title
        var_label: TNn # needed for axis name
        # figure_caption: '' 
      variability:
        script: eccc_extremes/variability_evaluation.py
        mpl_style: malinina24
        color_style: malinina24
        model_weighting: True
        units: C
        region: Alberta # needed for the figure title
        var_label: TNn # needed for axis name
        # figure_caption: '' 
