# recipe_wenzel16nature.yml
---
documentation:

  description: |
    This recipe reproduces most of the figures of Wenzel et al. (2016).
  authors:
    - wenzel_sabrina

  references:
    - wenzel16nature

  projects:
    - crescendo

preprocessors:
          
  highlat_gpp:
    custom_order: true
    weighting_landsea_fraction:
      area_type: land
    extract_region:
      start_longitude: 0.
      end_longitude: 360.
      start_latitude: 60.
      end_latitude: 90.
    area_statistics:
      operator: sum
    annual_statistics:
      operator: mean
      
  highlat_co2:
    custom_order: true
    extract_region:
      start_longitude: 0.
      end_longitude: 360.
      start_latitude: 60.
      end_latitude: 90.
    area_statistics:
      operator: mean
    annual_statistics:
      operator: mean
      
  highlat_amp:
    custom_order: true
    extract_region:
      start_longitude: 0.
      end_longitude: 360.
      start_latitude: 60.
      end_latitude: 90.
    area_statistics:
      operator: mean
    amplitude:
      coords: year
      

diagnostics:
  
  ### Wenzel et al. 2016:  Analysis for Pt. Barrow, Alaska  #########################

  diag_beta_Fig2:
    description: Fig 2 Comparison of simulated annual mean GPP at 2xCO2 in the 1%BGC simulations 
    themes:
      - phys
    realms:
      - land
    variables:
      gpp:
        preprocessor: highlat_gpp
        project: CMIP5
        mip: Lmon
        exp: esmFixClim1
        ensemble: r1i1p1
        start_year: 1860
        end_year: 1989
    additional_datasets:
      - {dataset: CanESM2}
      - {dataset: CESM1-BGC, start_year: 11, end_year: 140}
      - {dataset: GFDL-ESM2M, start_year: 11, end_year: 140}
      - {dataset: HadGEM2-ES}
      - {dataset: MIROC-ESM, start_year: 11, end_year: 140}
      - {dataset: MPI-ESM-LR}
      - {dataset: NorESM1-ME, start_year: 11, end_year: 140}
    scripts:
      carbon_beta: &idealized_carbon
        script: carbon_ec/carbon_beta.ncl
        cl_mean: False
        cl_output: True 
        bc_xmax_year: 1920
        bc_xmin_year: 1860
        styleset: CMIP5

  diag_co2cycle_Fig1+3: 
    description: Fig 1 Comparison of simulated annual mean GPP at 2xCO2 in the 1%BGC simulations and Fig 3 EC on the relative increase of large-scale GPP for 2xCO2
    themes:
      - phys
    realms:
      - land
    variables:
      co2s:
        preprocessor: highlat_co2
        short_name: co2s
        derive: true
        project: CMIP5
        mip: Amon
        exp: esmHistorical
        ensemble: r1i1p1
        start_year: 1850
        end_year: 2005
        reference_dataset: ESRL
      co2s_amp:
        preprocessor: highlat_amp # land_fraction_weighting
        short_name: co2s
        derive: true
        project: CMIP5
        mip: Amon
        exp: esmHistorical
        ensemble: r1i1p1
        start_year: 1850
        end_year: 2005
        reference_dataset: ESRL
    additional_datasets:
      #- {dataset: ESRL, project: OBS, type: ground, version: BRW, tier: 2, start_year: 1973, end_year: 2012, frequency: yr}
      - {dataset: CanESM2}
      - {dataset: CESM1-BGC}
      - {dataset: GFDL-ESM2M, start_year: 1861, end_year: 2005}
      - {dataset: HadGEM2-ES, start_year: 1860, end_year: 2005}
      - {dataset: MIROC-ESM}
      - {dataset: MPI-ESM-LR}
      - {dataset: NorESM1-ME}
    scripts:
      carbon_cycle: 
        script: carbon_ec/carbon_co2_cycle.ncl
        bc_xmax_year: 1920
        bc_xmin_year: 1860
        styleset: CMIP5
        nc_infile: ../../diag_beta_Fig2/carbon_beta/


