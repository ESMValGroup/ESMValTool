# recipe_wenzel16nature.yml
---
documentation:

  description: |
    This recipe reproduces most of the figures of Wenzel et al. (2016).
  authors:
    - wenzel_sabrina

  references:
    - wenzel16nature

  projects:
    - crescendo

preprocessors:

  land_fraction_weighting:
    weighting_landsea_fraction:
      area_type: land
      exclude: [
        'GCP', #'GFDL-ESM2M', 'CanESM2', 'MPI-ESM-LR', 'CESM1-BGC', 'NorESM1-ME'
        ]

  #global_land:
  #  weighting_landsea_fraction:
  #    area_type: land
  #    exclude: [
  #      'GCP', 'HadGEM2-ES', 'CanESM2', 'IPSL-CM5A-LR', 'GFDL-ESM2M', 'MPI-ESM-LR', 'CESM1-BGC', 'NorESM1-ME',
  #      ]
  #  area_statistics:
  #        operator: sum

          
  #tropical:
  #  extract_region:
  #    start_longitude: 0.
  #    end_longitude: 360.
  #    start_latitude: -30.
  #    end_latitude: 30.
  #  area_statistics:
  #        operator: mean


diagnostics:
  
  ### Wenzel et al. 2016:  Analysis for Pt. Barrow, Alaska  #########################
#
#  diag_co2cycle_Fig1: 
#    description: Fig 1 Comparison of simulated annual mean GPP at 2xCO2 in the 1%BGC simulations 
#    themes:
#      - phys
#    realms:
#      - land
#    variables:
#      co2:
#        preprocessor: default #land_fraction_weighting 
#        project: CMIP5
#        mip: Amon
#        exp: esmHistorical
#        ensemble: r1i1p1
#        start_year: 1860
#        end_year: 2005
#    additional_datasets: &2xCO2_datastet  
#      - {dataset: CanESM2}
#      - {dataset: CESM1-BGC}
#      - {dataset: GFDL-ESM2M}
#      - {dataset: HadGEM2-ES}
#      - {dataset: IPSL-CM5A-LR}
#      #- {dataset: MIROC-ESM}
#      - {dataset: MPI-ESM-LR}
#      - {dataset: NorESM1-ME}
#    scripts:
#      carbon_beta: &idealized_carbon
#        script: carbon_ec/carbon_cycle_co2.ncl
#        station: "60N-90N"
#        bc_Ytitle: "~F8~b~F21~~B~gpp~N~"
#        bc_units: "GtC"
#        bc_lonrange: (/0,360/)
#        bc_latmin: 60
#        bc_latmax: 90
#        cl_mean: False
#        cl_output: True 
#        bc_xmax_year: "1920"
#        bc_xmin_year: "1860"
#        styleset: CMIP5       # Plot style
      
  diag_beta_Fig2:
    description: Fig 2 Comparison of simulated annual mean GPP at 2xCO2 in the 1%BGC simulations 
    themes:
      - phys
    realms:
      - land
    variables: 
      gpp: &var_gpp
        preprocessor: default #land_fraction_weighting 
        project: CMIP5
        mip: Lmon
        exp: esmFixClim1
        ensemble: r1i1p1
        start_year: 1860
        end_year: 1920
    additional_datasets: &2xCO2_datastet  
      - {dataset: CanESM2}
      - {dataset: CESM1-BGC, start_year: 1, end_year: 140}
      - {dataset: GFDL-ESM2M, start_year: 1, end_year: 140}
      - {dataset: HadGEM2-ES, start_year: 1860, end_year: 1999}
      - {dataset: IPSL-CM5A-LR}
      #- {dataset: MIROC-ESM, start_year: 1, end_year: 140}
      - {dataset: MPI-ESM-LR}
      - {dataset: NorESM1-ME, start_year: 1, end_year: 140}
    scripts:
      carbon_beta: &idealized_carbon
        script: carbon_ec/carbon_beta.ncl
        station: "60N-90N"
        bc_Ytitle: "~F8~b~F21~~B~gpp~N~"
        bc_units: "GtC"
        bc_lonmin: 0
        bc_lonmax: 360
        bc_latmin: 60
        bc_latmax: 90
        cl_mean: False
        cl_output: True 
        bc_xmax_year: "1920"
        bc_xmin_year: "1860"
        styleset: CMIP5       # Plot style
            
#    description: Fig 3 EC on the relative increase of large-scale GPP for 2xCO2
#    themes:
#      - phys
#    realms:
#      - land
#    variables:
#      co2:
#        preprocessor: default 
#        project: CMIP5
#        mip: Amon
#        exp: esmHistorical
#        ensemble: r1i1p1
#        start_year: 1860
#        end_year: 2005
#      gpp: &var_gpp
#        preprocessor: default #land_fraction_weighting 
#        project: CMIP5
#        mip: Lmon
#        exp: esmHistorical
#        ensemble: r1i1p1
#        start_year: 1860
#        end_year: 2005
#      gpp: &var_gpp
#        preprocessor: default #land_fraction_weighting 
#        project: CMIP5
#        mip: Lmon
#        exp: esmFixClim1
#        ensemble: r1i1p1
#        start_year: 1860
#        end_year: 1920
#    additional_datasets: &2xCO2_datastet  
#      - {dataset: CanESM2}
#      - {dataset: CESM1-BGC}
#      - {dataset: GFDL-ESM2M}
#      - {dataset: HadGEM2-ES}
#      - {dataset: IPSL-CM5A-LR}
#      - {dataset: MIROC-ESM}
#      - {dataset: MPI-ESM-LR}
#      - {dataset: NorESM1-ME}
#    scripts:
#      carbon_beta: &idealized_carbon
#        script: carbon_ec/carbon_cycle_nbp-gpp.ncl
#        station: "60N-90N"
#        bc_Ytitle: "~F8~b~F21~~B~gpp~N~"
#        bc_units: "GtC"
#        bc_lonrange: (/0,360/)
#        bc_latmin: 60
#        bc_latmax: 90
#        cl_mean: False
#        cl_output: True 
#        bc_xmax_year: "1920"
#        bc_xmin_year: "1860"
#        styleset: CMIP5       # Plot style
        
#  diag_constraint_FigX: 
#    description: Fig X correlation of CO2 seasonal cycle and GPP
#    themes:
#      - phys
#    realms:
#      - land
#    variables:
#      co2:
#        preprocessor: default
#        project: CMIP5
#        mip: Amon
#        exp: esmHistorical
#        ensemble: r1i1p1
#        start_year: 1860
#        end_year: 2005
#      gpp: &var_gpp
#        preprocessor: default #land_fraction_weighting 
#        project: CMIP5
#        mip: Lmon
#        exp: esmHistorical
#        ensemble: r1i1p1
#        start_year: 1860
#        end_year: 2005
#    additional_datasets: &2xCO2_datastet  
#      - {dataset: CanESM2}
#      - {dataset: CESM1-BGC}
#      - {dataset: GFDL-ESM2M}
#      - {dataset: HadGEM2-ES}
#      - {dataset: IPSL-CM5A-LR}
#      - {dataset: MIROC-ESM}
#      - {dataset: MPI-ESM-LR}
#      - {dataset: NorESM1-ME}
#    scripts:
#      carbon_beta: &idealized_carbon
#        script: carbon_ec/carbon_co2-gpp-correlation.ncl
#        station: "60N-90N"
#        bc_Ytitle: "~F8~b~F21~~B~gpp~N~"
#        bc_units: "GtC"
#        bc_lonrange: (/0,360/)
#        bc_latmin: 60
#        bc_latmax: 90
#        cl_mean: False
#        cl_output: True 
#        bc_xmax_year: "1920"
#        bc_xmin_year: "1860"
#        styleset: CMIP5       # Plot style
#          diag_constraint_FigX:
