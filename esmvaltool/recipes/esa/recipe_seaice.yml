# ESMValTool
---
documentation:
  title: Seasonal cycle of NH/SH sea ice area
  description: >
    Plots of the seasonal cycle and time series of NH and SH sea ice area.
  authors:
    - lauer_axel
  maintainer:
    - lauer_axel


preprocessors:

  pp_map:
    regrid:
      target_grid: 0.5x0.5
      scheme: linear

  pp_nh:
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: 30
      end_latitude: 90
    climate_statistics:
      period: month
    area_statistics:
      operator: sum
    convert_units:
      units: 1e6 km2

  pp_nh_sep:
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: 30
      end_latitude: 90
    extract_month:
      month: 9
    area_statistics:
      operator: sum
    convert_units:
      units: 1e6 km2

  pp_sh:
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: -90
      end_latitude: -30
    climate_statistics:
      period: month
    area_statistics:
      operator: sum
    convert_units:
      units: 1e6 km2

  pp_sh_feb:
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: -90
      end_latitude: -30
    extract_month:
      month: 2
    area_statistics:
      operator: sum
    convert_units:
      units: 1e6 km2


diagnostics:

  siarea_seas:
    description: Create seasonal cycle plot of sea ice area.
    variables:
      sea_ice_area_nh: &var_basic
        short_name: siconc
        timerange: '1991/2020'
        preprocessor: pp_nh
        project: CMIP6
        mip: SImon
        exp: historical
        ensemble: r1i1p1f1
        grid: gr
#        reference_dataset: OSI-450-nh
        reference_dataset: ESACCI-SEAICE
        additional_datasets:
        - {dataset: OSI-450-nh, project: OBS, type: reanaly, version: v3, mip: OImon, tier: 2,
            supplementary_variables: [{short_name: areacello, mip: fx}]}
        - {dataset: ESACCI-SEAICE, project: OBS6, type: sat,
            version: L4-SICONC-RE-SSMI-12.5kmEASE2-fv3.0-NH, mip: SImon, tier: 2,
            benchmark_dataset: true, supplementary_variables: [{short_name: areacello, mip: Ofx}]}
      sea_ice_area_sh:
        <<: *var_basic
        preprocessor: pp_sh
#        reference_dataset: OSI-450-sh
        reference_dataset: ESACCI-SEAICE
        additional_datasets:
        - {dataset: OSI-450-sh, project: OBS, type: reanaly, version: v3, mip: OImon, tier: 2,
            supplementary_variables: [{short_name: areacello, mip: fx}]}
        - {dataset: ESACCI-SEAICE, project: OBS6, type: sat,
            version: L4-SICONC-RE-SSMI-12.5kmEASE2-fv3.0-SH, mip: SImon, tier: 2,
            benchmark_dataset: true, supplementary_variables: [{short_name: areacello, mip: Ofx}]}
    scripts:
      allplots:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        group_variables_by: variable_group
        facet_used_for_labels: dataset
        plots:
          annual_cycle: &plot_basic
            caption: '20-year average seasonal cycle of the sea ice area in million km2 from [dataset] compared with OSI-450.'
            pyplot_kwargs:
              title: 'Sea ice area (million km2)'
            plot_kwargs:
              ESACCI-SEAICE:
                color: blue
                label: 'ESACCI-SEAICE'
                linestyle: '-'
                linewidth: 2
                zorder: 3
              OSI-450-nh:
                color: blue
                label: 'OSISAF/CCI'
                linestyle: '-'
                linewidth: 2
                zorder: 3
              OSI-450-sh:
                color: blue
                label: 'OSISAF/CCI'
                linestyle: '-'
                linewidth: 2
                zorder: 3
              default:
                color: none
                label: '{dataset}'
                linestyle: '-'
                linewidth: 1
                zorder: 0

  siarea_min:
    description: Create time series of September/February sea ice area.
    variables:
      sea_ice_area_nh_sep:
        <<: *var_basic
        timerange: '1979/2020'
        preprocessor: pp_nh_sep
#        reference_dataset: OSI-450-nh
        reference_dataset: ESACCI-SEAICE
        additional_datasets:
        - {dataset: OSI-450-nh, project: OBS, type: reanaly, version: v3, mip: OImon, tier: 2,
            supplementary_variables: [{short_name: areacello, mip: fx}]}
        - {dataset: ESACCI-SEAICE, project: OBS6, type: sat,
            version: L4-SICONC-RE-SSMI-12.5kmEASE2-fv3.0-NH, mip: SImon, tier: 2,
            benchmark_dataset: true, supplementary_variables: [{short_name: areacello, mip: Ofx}],
            timerange: 1991/2020}
      sea_ice_area_sh_feb:
        <<: *var_basic
        timerange: '1979/2020'
        preprocessor: pp_sh_feb
#        reference_dataset: OSI-450-sh
        reference_dataset: ESACCI-SEAICE
        additional_datasets:
        - {dataset: OSI-450-sh, project: OBS, type: reanaly, version: v3, mip: OImon, tier: 2,
            supplementary_variables: [{short_name: areacello, mip: fx}]}
        - {dataset: ESACCI-SEAICE, project: OBS6, type: sat,
            version: L4-SICONC-RE-SSMI-12.5kmEASE2-fv3.0-SH, mip: SImon, tier: 2,
            benchmark_dataset: true, supplementary_variables: [{short_name: areacello, mip: Ofx}],
            timerange: 1991/2020}
    scripts:
      allplots:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        group_variables_by: variable_group
        facet_used_for_labels: dataset
        plots:
          timeseries:
            <<: *plot_basic
            caption: 'Time series of NH September/SH February sea ice area in million km2 from [dataset] compared with OSI-450.'

  sic_mean_1980:
    title: sea ice concentration 1980-1989
    description: test sea ice concentration
    variables:
      sic:
        project: CMIP6
        exp: historical
        preprocessor: pp_map
        additional_datasets:
        - {dataset: OSI-450-nh, project: OBS, type: reanaly, version: v3, mip: OImon, tier: 2,
            supplementary_variables: [{short_name: areacello, mip: fx}], timerange: 1980/1989}
    scripts:
      plot:
        script: clouds/clouds.ncl
        projection: PolarStereographic
        timemean: annualclim
        showdiff: false
        explicit_cn_levels: [1, 10, 20, 30, 40, 50, 60, 70, 80, 90, 99]
        region: [50, 90, 0, 360]

  sic_mean_2000:
    title: sea ice concentration 2010-2019
    description: test sea ice concentration
    variables:
      sic:
        project: CMIP6
        exp: historical
        preprocessor: pp_map
        additional_datasets:
        - {dataset: OSI-450-nh, project: OBS, type: reanaly, version: v3, mip: OImon, tier: 2,
            supplementary_variables: [{short_name: areacello, mip: fx}], timerange: 2010/2019}
        - {dataset: ESACCI-SEAICE, project: OBS6, type: sat,
            version: L4-SICONC-RE-SSMI-12.5kmEASE2-fv3.0-NH, mip: SImon, tier: 2,
            benchmark_dataset: true, supplementary_variables: [{short_name: areacello, mip: Ofx}],
            timerange: 2010/2019}
    scripts:
      plot:
        script: clouds/clouds.ncl
        projection: PolarStereographic
        timemean: annualclim
        showdiff: false
        explicit_cn_levels: [1, 10, 20, 30, 40, 50, 60, 70, 80, 90, 99]
        region: [50, 90, 0, 360]
