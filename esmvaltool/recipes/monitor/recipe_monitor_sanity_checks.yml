# ESMValTool
---
documentation:
  title: Basic sanity checks.
  description: >
    Calculate basic sanity checks e.g. for monitoring new model runs.
  authors:
    - lauer_axel
  maintainer:
    - lauer_axel


# Note: The following models are just examples
datasets:
  - {dataset: MPI-ESM1-2-LR, grid: gn, mip: Amon, project: CMIP6, exp: historical, ensemble: r1i1p1f1}

timerange_for_models: &time_period
  timerange: '1980/2014'


preprocessors:

  globalmean:
    area_statistics:
      operator: mean

  globalmin:
    area_statistics:
      operator: min

  globalmax:
    area_statistics:
      operator: max


diagnostics:

  # *** global min/max/mean ***

  clt:
    description: time series of global min/max/mean including "reasonable" ranges
    variables:
      clt_mean:
        <<: *time_period
        legend_label: 'global mean'
        short_name: clt
        preprocessor: globalmean
      clt_min:
        <<: *time_period
        short_name: clt
        legend_label: 'global min'
        preprocessor: globalmin
      clt_max:
        <<: *time_period
        short_name: clt
        legend_label: 'global max'
        preprocessor: globalmax
    scripts:
      timeseries:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        group_variables_by: short_name
        facet_used_for_labels: legend_label
        plots:
          timeseries:
            annual_mean_kwargs: false
            hlines:
              - y: 62.0
                color: orange
              - y: 67.0
                color: orange
              - y: 58.0
                color: red
              - y: 68.0
                color: red
            plot_kwargs:
              'global mean':
                color: blue
                label: null
                linestyle: '-'
                linewidth: 2
                label: '{dataset}'
              'global min':
                color: blue
                label: null
                linestyle: '--'
                linewidth: 1
              'global max':
                color: blue
                label: null
                linestyle: '--'
                linewidth: 1

  rlut:
    description: time series of global min/max/mean including "reasonable" ranges
    variables:
      rlut_mean:
        <<: *time_period
        short_name: rlut
        legend_label: 'global mean'
        preprocessor: globalmean
      rlut_min:
        <<: *time_period
        short_name: rlut
        legend_label: 'global min'
        preprocessor: globalmin
      rlut_max:
        <<: *time_period
        short_name: rlut
        legend_label: 'global max'
        preprocessor: globalmax
    scripts:
      timeseries:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        group_variables_by: short_name
        facet_used_for_labels: legend_label
        plots:
          timeseries:
            annual_mean_kwargs: false
              - y: 232.0
                color: orange
              - y: 240.0
                color: orange
              - y: 229.0
                color: red
              - y: 241.0
                color: red
            plot_kwargs:
              'global mean':
                color: blue
                label: null
                linestyle: '-'
                linewidth: 2
                label: '{dataset}'
              'global min':
                color: blue
                label: null
                linestyle: '--'
                linewidth: 1
              'global max':
                color: blue
                label: null
                linestyle: '--'
                linewidth: 1
