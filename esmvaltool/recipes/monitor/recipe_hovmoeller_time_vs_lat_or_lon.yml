---
documentation:
  title: ICON Evaluation.
  description: Evaluate ICON simulations with observational products.
  authors:
    - schlund_manuel

preprocessors:

  zonal_mean:
    regrid:
      target_grid: 2x2
      scheme:
        reference: esmf_regrid.schemes:ESMFAreaWeighted
    zonal_statistics:
      operator: mean
      
  meridional_mean:
    regrid:
      target_grid: 2x2
      scheme:
        reference: esmf_regrid.schemes:ESMFAreaWeighted
    meridional_statistics:
      operator: mean


diagnostics:

  time_vs_lat_without_ref:
    variables:
      tas:
        preprocessor: zonal_mean
        mip: Amon
        timerange: '20000101/20030101'
        additional_datasets:
          - {project: ICON, dataset: ICON, exp: icon-2.6.1_atm_amip_R2B5_r1v1i1p1l1f1}
    scripts:
      plot: 
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        plot_filename: '{plot_type}_{real_name}_{dataset}_{mip}'
        plots:
          hovmoeller_time_vs_lat_or_lon:
            common_cbar: true

  time_vs_lat_with_ref:
    variables:
      tas:
        preprocessor: zonal_mean
        mip: Amon
        timerange: '20000101/20030101'
        additional_datasets:
          - {project: ICON,    dataset: ICON, exp: icon-2.6.1_atm_amip_R2B5_r1v1i1p1l1f1}
          - {project: native6, dataset: ERA5, type: reanaly, version: v1, tier: 3, reference_for_monitor_diags: true}
    scripts:
      plot:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        plot_filename: '{plot_type}_{real_name}_{dataset}_{mip}'
        plots:
          hovmoeller_time_vs_lat_or_lon:
            common_cbar: true

  time_vs_lon_without_ref:
    variables:
      tas:
        preprocessor: meridional_mean
        mip: Amon
        timerange: '20000101/20030101'
        additional_datasets:
          - {project: ICON,    dataset: ICON, exp: icon-2.6.1_atm_amip_R2B5_r1v1i1p1l1f1}
    scripts:
      plot:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        plot_filename: '{plot_type}_{real_name}_{dataset}_{mip}'
        plots:
          hovmoeller_time_vs_lat_or_lon:
            common_cbar: true

  time_vs_lon_with_ref:
    variables:
      tas:
        preprocessor: meridional_mean
        mip: Amon
        timerange: '20000101/20030101'
        additional_datasets:
          - {project: ICON,    dataset: ICON, exp: icon-2.6.1_atm_amip_R2B5_r1v1i1p1l1f1}
          - {project: native6, dataset: ERA5, type: reanaly, version: v1, tier: 3, reference_for_monitor_diags: true}
    scripts:
      plot:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        plot_filename: '{plot_type}_{real_name}_{dataset}_{mip}'
        plots:
          hovmoeller_time_vs_lat_or_lon:
            common_cbar: true
