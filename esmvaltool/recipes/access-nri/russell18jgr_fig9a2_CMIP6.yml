# ESMValTool
# recipe_russell18jgr.yml
---
documentation:
  title: Southern Ocean Metrics
  description: |
    Recipe for russell et al figures 9a,
    Russell, J.L.,et al., 2018, J. Geophysical Research - Oceans,
    123, 3120-3143, https://doi.org/10.1002/2017JC013461

    Please read individual description in diagnostics section.

  authors:
    - russell_joellen
    - pandde_amarjiit

  maintainer:
    - russell_joellen
    - pandde_amarjiit

  references:
    - russell18jgr

  projects:
    - russell_project

preprocessors:
  preprocessor_time_land:
    climate_statistics:
      operator: mean
      period: full
    mask_landsea:
      mask_out: "land"

  preprocessor_time:
    climate_statistics:
      operator: mean
      period: full


diagnostics:

  Figure_9a: #Eyring ~ fig 28
    description: |
      Diagnostic for russell et al figure 9a. Plots the scatter plot of the
      width of the Southern Hemisphere westerly wind band against the
      annual-mean integrated heat uptake south of 30S (in PWâ€”negative uptake
      is heat lost from the ocean), along with the line of best fit. The
      diagnostic script will be updated later to include tauu variable and
      non-hfds datasets
      hfds = rsds + rlds - (rsus + rlus + hfss + hfls)
    themes:
      - phys
    realms:
      - ocean
    variables:
      # tauu:
      #   preprocessor: preprocessor_time_land
      #   mip: Amon
      #   project: CMIP5
      #   exp: historical
      #   ensemble: r1i1p1
      #   start_year: 1986
      #   end_year: 2005
      tauuo:
        preprocessor: preprocessor_time
        mip: Omon
        project: CMIP6
        exp: historical
        ensemble: r1i1p1f1
        grid: gn
        start_year: 1986
        end_year: 2005
      hfds:
        preprocessor: preprocessor_time
        mip: Omon
        project: CMIP6
        exp: historical
        ensemble: r1i1p1f1
        grid: gn
        start_year: 1986
        end_year: 2005
      areacello:
        mip: Ofx
        project: CMIP6
        exp: historical
        ensemble: r1i1p1f1
        grid: gn
        start_year: 1986
        end_year: 2005
    additional_datasets:
      - {dataset: ACCESS-ESM1-5, institute: CSIRO}
      - {dataset: CESM2, institute: NCAR}
      - {dataset: CMCC-CM2-HR4, institute: CMCC}
      - {dataset: EC-Earth3, institute: EC-Earth-Consortium}
      # - {dataset: FGOALS-f3-L, institute: CAS} #log ncl error 'lat1'?
      # - {dataset: GFDL-CM4, institute: NOAA-GFDL} #areacello coordinate rank error
      # - {dataset: IPSL-CM5A2-INCA, institute: IPSL}
      - {dataset: MIROC6, institute: MIROC}
      - {dataset: MRI-ESM2-0, institute: MRI}
      - {dataset: NorESM2-LM, institute: NCC}
      # - {dataset: TaiESM1, institute: AS-RCEC}

    scripts:
      Figure9a:
        script: russell18jgr/russell18jgr-fig9a.ncl
        styleset: CMIP6
        ncdf: default

  # **********************************************************************
  # zonal wind stress
  # **********************************************************************

  Figure_2: #Eyring fig 27
    description: |
      Diagnostic for russell et al Figure 2. Plots The zonal and annual means
      of the zonal wind stress (N/m^2). Here, we are using tauuo,
      figures in russell18jgr paper were  made using tauuo, but tauu can
      also be used if tauuo file is not available. To use tauu variable
      in this recipe just uncomment variable 'tauu' and add dataset names
      in additional datasets of respective variable. If there are no dataset
      in a variable, entire variable section needs to be commented out.
    themes:
      - phys
    realms:
      - ocean
    variables:
      tauuo:
        preprocessor: preprocessor_time
        mip: Omon
        project: CMIP6
        exp: historical
        ensemble: r1i1p1f1
        grid: gn
        start_year: 1986
        end_year: 2005
        additional_datasets:
          - {dataset: ACCESS-ESM1-5, institute: CSIRO}
          - {dataset: CESM2, institute: NCAR}
          - {dataset: CMCC-CM2-HR4, institute: CMCC}
          - {dataset: EC-Earth3, institute: EC-Earth-Consortium}
          - {dataset: NorESM2-LM, institute: NCC}
    scripts:
      tauu-lineplot:
        script: russell18jgr/russell18jgr-fig2.ncl
        # Plot style
        styleset: CMIP6
        ncdf: default