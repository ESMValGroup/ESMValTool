# ESMValTool
# recipe_combined_indices.yml
---
documentation:
  title: |
    Indices and area weighted averages.

  description: |
    Recipe for for computing seasonal means or running averages,
    combining indices from multiple models and computing area averages

  authors:
    - hunter_alasdair
    - perez-zanon_nuria
    - manubens_nicolau

  maintainer:
    - unmaintained

  projects:
    - c3s-magic

datasets:
  # - {dataset: MPI-ESM-MR, project: CMIP5, exp: historical, ensemble: r1i1p1, start_year: 1950, end_year: 2005}
  # - {dataset: bcc-csm1-1, project: CMIP5, exp: historical, ensemble: r1i1p1, start_year: 1950, end_year: 2005}
  - {dataset: ACCESS-CM2, institute: CSIRO-ARCCSS, project: CMIP6, ensemble: r1i1p1f1, grid: gn, exp: historical, timerange: 1950/2014}
  - {dataset: ACCESS-ESM1-5, institute: CSIRO, project: CMIP6, ensemble: r1i1p1f1, grid: gn, exp: historical, timerange: 1950/2014}
  # - {dataset: BCC-CSM2-MR, institute: BCC}
  # - {dataset: BCC-ESM1, institute: BCC}

preprocessors:
  preprocessor1:
    regrid:
      target_grid: 1x1
      scheme: linear

diagnostics:
  combine_indices: #fig 20
    description: Combine indices and/or compute area weighted averages.
    variables:
      tos:
        preprocessor: preprocessor1
        mip: Omon
        project: CMIP6
        activity: CMIP
    scripts:
      main:
        script: magic_bsc/combined_indices.R
        # Weights for combining indices - if not "equal" or "NULL", must be the same length as the number of indices
        region: Nino3.4  # Nino3, Nino3.4, Nino4, NAO or SOI

        # Compute running mean?
        running_mean: null

        # Compute seasons?
        moninf: 12  # First month
        monsup: 2  # Last month

        # Compute standarization?
        standardized: true
