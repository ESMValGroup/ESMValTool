# ESMValTool
# recipe_python.yml
---
documentation:
  description: |
    Example recipe that plots a map and timeseries of temperature.

  title: Recipe that runs an example diagnostic written in Python.

  authors:
    - vegas-regidor_javier

  maintainer:
    - vegas-regidor_javier

  references:
    - acknow_project

  projects:
    - proyecto_off

datasets:
  - {dataset: CanESM5, project: CMIP6, exp: historical, ensemble: r1i1p1f1, grid: gn}
  - {dataset: CanESM5, project: CMIP6, exp: historical, ensemble: r2i1p1f1, grid: gn}
  - {dataset: CanESM5, project: CMIP6, exp: historical, ensemble: r3i1p1f1, grid: gn}


preprocessors:
  predictor_preproc:
    regrid:
      target_grid:
        start_longitude: -30
        end_longitude: 0
        step_longitude: 0.5
        start_latitude: -5
        end_latitude: 10
        step_latitude: 0.5
      scheme: linear
    # extract_region:
    #   start_longitude: -30
    #   end_longitude: 0
    #   start_latitude: -5
    #   end_latitude: 10
    mask_landsea:
      mask_out: land

  predictand_preproc:
    # regrid:
    #   target_grid:
    #     start_longitude: 345
    #     end_longitude: 360
    #     step_longitude: 0.5
    #     start_latitude: 35
    #     end_latitude: 45
    #     step_latitude: 0.5
    #   scheme: linear
    extract_region:
      start_longitude: 345
      end_longitude: 360
      start_latitude: 35
      end_latitude: 45



diagnostics:
  spy4cast:
    description: Annual mean temperature in Amsterdam and global mean since 1850.
    themes:
      - phys
    realms:
      - atmos
    variables:
      predictor:
        short_name: tos
        mip: Omon
        preprocessor: predictor_preproc
        start_year: 1850
        end_year: 2000
      predictand:
        short_name: ps
        mip: Amon
        preprocessor: predictand_preproc
        start_year: 1850
        end_year: 2000
    scripts:
      mca:
        script: spy4cast/mca.py
        cross_validation: True
        modes: 3
        alpha: 0.1  # Significance level



