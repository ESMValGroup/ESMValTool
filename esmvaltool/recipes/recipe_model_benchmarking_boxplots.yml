# ESMValTool
---
documentation:
  title: Beichmarkig of a single model.

  description: >
          Benchmarking: Box plots.

  authors:
    - bock_lisa

  maintainer:
    - bock_lisa


datasets:
    - {dataset: '*', institute: '*', ensemble: r1i1p1f1, grid: '*'}
        #    - {dataset: ACCESS-CM2, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: ACCESS-ESM1-5, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: AWI-CM-1-1-MR, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: AWI-ESM-1-1-LR, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: BCC-CSM2-MR, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: BCC-ESM1, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: CAMS-CSM1-0, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: CanESM5-CanOE, ensemble: r1i1p2f1, grid: gn}
        #    - {dataset: CanESM5, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: CESM2, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: CESM2-FV2, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: CESM2-WACCM, ensemble: r1i1p1f1, grid: gn}
        #    - {dataset: GFDL-ESM4, grid: gr1, ensemble: r1i1p1f1}
    - {dataset: ACCESS1-0, ensemble: r1i1p1, project: CMIP5, benchmark_dataset: true}


preprocessors:

  rmse:
    custom_order: true
    climate_statistics:
      operator: mean
    regrid:
      target_grid: 2x2
      #scheme: linear
      scheme: nearest
    convert_units:
      units: mm day-1
    distance_metric:
      metric: rmse
      coords: [latitude, longitude]

  global_mean:
    area_statistics:
      operator: mean
    climate_statistics:
      operator: mean

  extract_ar6_regions:
    regrid:
      target_grid: 5x5
      scheme: linear
    extract_shape:
      shapefile: ar6
      crop: true
      decomposed: true
      ids:
        Name: &regions_to_extract
          - N.Europe
            #- West&Central-Europe
            #- Mediterranean
            #- Equatorial.Pacific-Ocean
            #- Equatorial.Atlantic-Ocean
            #- Equatorial.Indic-Ocean
    convert_units:
      units: mm day-1
    area_statistics:
      operator: mean
    climate_statistics: 
      operator: mean



diagnostics:

  plot_boxplots:
    description: Plot boxplots for different variables.
    variables:
      pr:
        preprocessor: rmse
        project: CMIP6
        mip: Amon
        exp: historical
        timerange: '1979/2004'
            #pr:
            #  mip: day
            #  preprocessor: extract_ar6_regions
            #  project: CMIP6
            #  exp: historical
            #  timerange: '2005/2014'
            #    scripts: null
        additional_datasets:
          - {dataset: GPCP-SG, project: OBS, type: atmos, version: 2.3, tier: 2, reference_for_metric: true}
    scripts:
      allplots:
        script: monitor/multi_datasets.py
        plot_folder: '{plot_dir}'
        group_variables_by: variable_group
        plots:
          benchmarking_boxplot:




        #seaborn_func: boxplot
        #        groupby_facet: var
        #seaborn_kwargs:
        #  kind: hist
        #  stat: density
        #  bins: 300
        #  y: pr
        #  col: shape_id
        #  col_order: *regions_to_extract
        #  col_wrap: 3
        #  hue: alias
        #  facet_kws:
        #    sharey: false
        #add_aux_coords: true
        #dropna_kwargs:
        #  axis: 0
        #  how: any
        #legend_title: Model
        #plot_object_methods:
        #  set:
        #    xlabel: 'Precipitation [mm/day]'
        #    xlim: [0, 30]
        #  set_titles: '{col_name}'
        #seaborn_settings:
        #  style: ticks
        #  rc:
        #    axes.titlepad: 15.0
        #suptitle: Summary plot.
