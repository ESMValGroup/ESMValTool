# ESMValTool
---
documentation:
  title: O3.
  description: Example recipe for LMU lecture (2023) for O3.
  authors:
    - schlund_manuel


preprocessors:

  create_climatology:  # this is a custom name
    regrid:
      scheme: linear
      target_grid: 5x5
    climate_statistics:  # elements from https://docs.esmvaltool.org/projects/ESMValCore/en/latest/recipe/preprocessor.html
      operator: mean
      period: full
    extract_region:
      start_latitude: -90
      end_latitude: -40
      start_longitude: 0
      end_longitude: 360
    extract_month:
      month: 10
    convert_units:
      units: DU


datasets:
   - {project: CMIP6, dataset: CNRM-ESM2-1, grid: gr, ensemble: r1i1p1f2, exp: historical}
   - {project: CMIP6, dataset: UKESM1-0-LL, grid: gn, ensemble: r1i1p1f2, exp: historical}


diagnostics:

  climatology:  # this is a custom name
    variables:
      toz:
        mip: AERmon
        exp: historical
        preprocessor: create_climatology
        timerange: '2000/2010'
    additional_datasets:
      - {project: OBS, dataset: NIWA-BS, type: sat, version: v3.3, tier: 3, mip: Amon, timerange: '2000/2010', reference_for_monitor_diags: true}
    scripts:
      plot:  # this is a custom name
        script: monitor/multi_datasets.py
        #plot_folder: ~/esmvaltool_output/o3_part2
        plot_filename: '{plot_type}_{real_name}_{dataset}_{exp}'
        facet_used_for_labels: alias
        savefig_kwargs:
          dpi: 150
          bbox_inches: tight
          orientation: landscape
        plots:
          map:
            projection: SouthPolarStereo  # to focus on South Pole. Omit  to show "regular" map
            pyplot_kwargs:
              suptitle: 'Total Column Ozone (October 2000-2010)'  # large title
            common_cbar: true
            fontsize: 7
            show_x_minor_ticks: false
            plot_kwargs:
              default:
                cmap: YlOrRd  # colormap; e.g., 'YlOrRd' for temperatures 'bwr' for anomalies
                # cmap: bwr
                # norm: centered  # center colormap around zero; useful when showing anomalies
                #levels: [80, 120, 160, 200, 240, 280, 320, 360, 400, 440]  # colorbar intervals
