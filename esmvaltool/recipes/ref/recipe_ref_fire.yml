# ESMValTool
---
documentation:
  description: |
    Recipe that plots diagnostics regarding climate drivers for fire.
    The diagnostic uses code for the ConFire model from the following GitHub repository:
    https://github.com/douglask3/Bayesian_fire_models/tree/AR7_REF

  title: Climate drivers for fire.

  authors:
    - lenhardt_julien
    - kelley_douglas

  maintainer:
    - lenhardt_julien

datasets:
  - {dataset: MPI-ESM1-2-LR, ensemble: r1i1p1f1, grid: gn, project: CMIP6, exp: historical, start_year: 2013, end_year: 2014}

preprocessors:

  preproc: &preproc
    regrid:
      target_grid: 2.5x2.5
      scheme: nearest
    mask_landsea:
      mask_out: "sea"
  preproc_fraction:
    <<: *preproc
    convert_units:
      units: 1

diagnostics:

  fire_evaluation:
    description: Climate drivers for fire
    variables:
      #Precipitation
      pr:
        mip: Amon
        preprocessor: preproc
      # Maximum surface temperature
      tasmax:
        mip: Amon
        preprocessor: preproc
      # Tree cover percentage
      treeFrac:
        mip: Lmon
        preprocessor: preproc_fraction
      # Vegetation cover percentage
      vegFrac:
        mip: Emon
        preprocessor: preproc_fraction
      # Vegetation carbon mass
      cVeg:
        mip: Lmon
        preprocessor: preproc
      # To compute the vapor pressure deficit (vpd)
      # Surface temperature
      tas:
        mip: Amon
        preprocessor: preproc
      # Near-surface relative humidity
      hurs:
        mip: Amon
        preprocessor: preproc

    scripts:
      fire_evaluation:
        script: fire/fire_diagnostic.py
        confire_param: https://zenodo.org/records/14917245
        # IMPORTANT = the order of the variables should fit the configuration files of the ConFire model run
        var_order: ['pr', 'tasmax', 'treeFrac', 'vegFrac', 'vpd', 'cVeg']
