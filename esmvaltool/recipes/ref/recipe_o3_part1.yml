# ESMValTool
---
documentation:
  title: O3.
  description: Example recipe for LMU lecture (2023) for O3.
  authors:
    - schlund_manuel


preprocessors:

  create_time_series:  # this is a custom name
    annual_statistics:  # elements from https://docs.esmvaltool.org/projects/ESMValCore/en/latest/recipe/preprocessor.html
      operator: mean
    area_statistics:
      operator: mean
    extract_region:
      start_latitude: -90
      end_latitude: -60
      start_longitude: 0
      end_longitude: 360
    extract_month:
      month: 10
    convert_units:
      units: DU


datasets:
   - {project: CMIP6, dataset: CNRM-ESM2-1, grid: gr, ensemble: r1i1p1f2, exp: historical}
  # - {project: CMIP6, dataset: CNRM-ESM2-1, grid: gr, ensemble: r1i1p1f2, exp: [historical, ssp126]}
  # - {project: CMIP6, dataset: CNRM-ESM2-1, grid: gr, ensemble: r1i1p1f2, exp: [historical, ssp585]}
   - {project: CMIP6, dataset: UKESM1-0-LL, grid: gn, ensemble: r1i1p1f2, exp: historical}
  #- {project: CMIP6, dataset: UKESM1-0-LL, grid: gn, ensemble: r1i1p1f2, exp: [historical, ssp126]}
  #- {project: CMIP6, dataset: UKESM1-0-LL, grid: gn, ensemble: r1i1p1f2, exp: [historical, ssp585]}


diagnostics:

  time_series:  # this is a custom name
    variables:
      toz:
        mip: AERmon
        exp: historical
        preprocessor: create_time_series
        timerange: '1950/2014'
    additional_datasets:
      - {project: OBS, dataset: NIWA-BS, type: sat, version: v3.3, tier: 3, mip: Amon, timerange: '1979/2016'}
    scripts:
      plot:  # this is a custom name
        script: monitor/multi_datasets.py
        plot_folder: ~/esmvaltool_output/o3_part1
        plot_filename: '{plot_type}_{real_name}_{dataset}_{exp}'
        facet_used_for_labels: alias
        savefig_kwargs:
          dpi: 150
          bbox_inches: tight
          orientation: landscape
        plots:
          timeseries:
            annual_mean_kwargs: false
            plot_kwargs:  # The following lines are used to customize the individual lines in the plot
              OBS:
                color: black
              CMIP6_CNRM-ESM2-1_historical-ssp126:
                color: cyan
              CMIP6_CNRM-ESM2-1_historical-ssp585:
                color: cornflowerblue
              CMIP6_UKESM1-0-LL_historical-ssp126:
                color: gold
              CMIP6_UKESM1-0-LL_historical-ssp585:
                color: darkorange
            pyplot_kwargs:
              title: Total Column Ozone  # title of the plot
              # ylim: [220, 350]  # range of y-axis
