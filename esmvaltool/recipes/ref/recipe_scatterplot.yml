# ESMValTool
---
documentation:
  title: Model evaluation with focus on clouds.
  description: >
    Plot scatter plots of two different variables using the Seaborn diagnostic 
    in ESMValTool.
  authors:
    - bock_lisa
    - lauer_axel
  maintainer:
    - bock_lisa

timerange_for_models: &time_period
  timerange: '2005/2014'  # can be specified, this is just an example

diagnostics:
  plot_joint_clt_lwcre:
    description: Scatterplot clt vs lwcre.
    variables:
      clt:
        mip: Amon
        exp: historical
        ensemble: r1i1p1
        <<: *time_period
      lwcre:
        mip: Amon
        derive: true
        force_derivation: false
        exp: historical
        ensemble: r1i1p1
        <<: *time_period
    additional_datasets:
      - {dataset: CESM2-WACCM, project: CMIP6, grid: gn, ensemble: r1i1p1f1}
    scripts:
      plot:
        script: seaborn_diag.py
        seaborn_func: jointplot
        title: 
        seaborn_kwargs:
          kind: hist
          x: clt
          y: lwcre
          bins: 20                    # Adjust binning for histograms
          stat: probability
          cmap: YlGnBu
          marginal_ticks: True
          marginal_kws:
            color: darkturquoise
            bins: 20
            fill: True
            stat: probability
          #cbar: True
          #cbar_kws:
          #  use_gridspec: False
          #  location: "bottom"
        add_aux_coords: true
        dropna_kwargs:
          axis: 0
          how: any
        plot_object_methods:
          set_axis_labels:
            xlabel: 'clt [%]'
            ylabel: 'lwcre [W m-2]'
        seaborn_settings:
          style: ticks
          rc:
            axes.titlepad: 15.0

  plot_hist_with_ref_clt_lwcre:
    description: Scatterplot clt vs swcre with reference.
    variables:
      clt:
        mip: Amon
        exp: historical
        ensemble: r1i1p1
        <<: *time_period
      lwcre:
        mip: Amon
        derive: true
        force_derivation: false
        exp: historical
        ensemble: r1i1p1
        <<: *time_period
    additional_datasets:
      - {dataset: ESACCI-CLOUD, project: OBS, type: sat, version: AVHRR-AMPM-fv3.0, tier: 2, alias: ESACCI-CLOUD}
      - {dataset: CESM2-WACCM, project: CMIP6, grid: gn, ensemble: r1i1p1f1, alias: CESM2-WACCM}
    scripts:
      plot:
        script: seaborn_diag.py
        seaborn_func: displot
        seaborn_kwargs:
          kind: hist
          col: alias                # Creates side-by-side plots for each dataset
          x: clt
          y: lwcre
          bins: 20                    # Adjust binning for histograms
          height: 5                   # Set height of each subplot
          aspect: 1.2                 # Set aspect ratio
          stat: probability 
          common_norm: True
          cmap: YlGnBu
          cbar: True                  # Includes a color bar
          cbar_kws:
            label: "Probability"
        add_aux_coords: true
        dropna_kwargs:
          axis: 0
          how: any
        plot_object_methods:
          set_axis_labels:
            xlabel: 'clt [%]'
            ylabel: 'swcre [W m-2]'
        seaborn_settings:
          style: ticks
          rc:
            axes.titlepad: 15.0