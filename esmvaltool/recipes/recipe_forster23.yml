# ESMValTool
# recipe_forster23.yml
---
documentation:
  title:
    Update to Gillett20 for Forster et al. 2026.
  description: |
    Produces estimates of attributable warming for Forster et al. (202), Indicators of Global Climate Change 2025, updated from Gillett et al. (2021)

  authors:
    - kirchmeier-young_megan
    - cowtan_kevin
    - gillett_nathan

  references:
    - gillett20ncc

#  projects:


preprocessors:

  regrid_5_5:
    regrid:
      target_grid: 5x5
      scheme: linear

diagnostics:


  # **********************************************************************
  # Preprocess tas, tos, siconc data by regridding to HadCRUT4 grid.
  # **********************************************************************

  gillett20_figs:
    description: Preprocess data needed for Gillett et al. (2021) update for Forster et al. (2025).
    variables:
      tas:
        preprocessor: regrid_5_5
        reference_dataset: HadCRUT4
        field: T2Ms
        mip: Amon
        project: CMIP6
        exp: [historical,ssp245]
        grid: gr
        start_year: 1850
        end_year: 2029
        additional_datasets:
          - {dataset: CanESM5, ensemble: "r(1:25)i1p1f1", grid: gn}
          - {dataset: CanESM5, ensemble: "r(1:25)i1p2f1", grid: gn}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-stratO3,ssp245-stratO3]}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:10)i1p1f2", grid: gn}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:5)i1p1f2", grid: gn, exp: [hist-nat,ssp245-nat]}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:5)i1p1f2", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:6)i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r10i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r11i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r14i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r22i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r25i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:10)i1p1f1", exp: [hist-nat,ssp245-nat]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:6)i1p1f1", exp: [hist-GHG,ssp245-GHG]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(8:10)i1p1f1", exp: [hist-GHG,ssp245-GHG]}
          - {dataset: MIROC6, ensemble: "r(1:3)i1p1f1", grid: gn}#r4 and r5 give cat problem.
          - {dataset: MIROC6, ensemble: "r(1:50)i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
          - {dataset: MIROC6, ensemble: "r(1:50)i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: MIROC6, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}
          - {dataset: MIROC6, ensemble: "r(1:3)i1p1f1", grid: gn, exp: [hist-stratO3,ssp245-stratO3]}
#          - {dataset: NorESM2-LM, ensemble: "r(2:3)i1p1f1", grid: gn} #1 didn't work.
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}


      tos:
        preprocessor: regrid_5_5
        reference_dataset: HadCRUT4
        field: T2Ms
        mip: Omon
        project: CMIP6
        exp: [historical,ssp245]
        grid: gn
        start_year: 1850
        end_year: 2029
        additional_datasets:  &damip_simulations
          - {dataset: CanESM5, ensemble: "r(1:25)i1p1f1", grid: gn}
          - {dataset: CanESM5, ensemble: "r(1:25)i1p2f1", grid: gn}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-stratO3,ssp245-stratO3]}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:10)i1p1f2", grid: gn}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:5)i1p1f2", grid: gn, exp: [hist-nat,ssp245-nat]}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:5)i1p1f2", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:6)i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r10i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r11i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r14i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r22i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r25i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:10)i1p1f1", exp: [hist-nat,ssp245-nat]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:6)i1p1f1", exp: [hist-GHG,ssp245-GHG]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(8:10)i1p1f1", exp: [hist-GHG,ssp245-GHG]}
          - {dataset: MIROC6, ensemble: "r(1:3)i1p1f1", grid: gn}#
          - {dataset: MIROC6, ensemble: "r(1:50)i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
          - {dataset: MIROC6, ensemble: "r(1:50)i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: MIROC6, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}
          - {dataset: MIROC6, ensemble: "r(1:3)i1p1f1", grid: gn, exp: [hist-stratO3,ssp245-stratO3]}
#          - {dataset: NorESM2-LM, ensemble: "r(2:3)i1p1f1", grid: gn} #1 didn't work.
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}



      siconc:
        preprocessor: regrid_5_5
        reference_dataset: HadCRUT4
        field: T2Ms
        mip: SImon
        project: CMIP6
        exp: [historical,ssp245]
        grid: gn
        start_year: 1850
        end_year: 2029
        additional_datasets:
          - {dataset: CanESM5, ensemble: "r(1:25)i1p1f1", grid: gn}
          - {dataset: CanESM5, ensemble: "r(1:25)i1p2f1", grid: gn}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}
          - {dataset: CanESM5, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-stratO3,ssp245-stratO3]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:6)i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r10i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r11i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r14i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r22i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r25i1p1f1"}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:10)i1p1f1", exp: [hist-nat,ssp245-nat]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(1:6)i1p1f1", exp: [hist-GHG,ssp245-GHG]}
          - {dataset: IPSL-CM6A-LR, ensemble: "r(8:10)i1p1f1", exp: [hist-GHG,ssp245-GHG]}
          - {dataset: MIROC6, ensemble: "r(1:3)i1p1f1", grid: gn}#
          - {dataset: MIROC6, ensemble: "r(1:50)i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
          - {dataset: MIROC6, ensemble: "r(1:50)i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
          - {dataset: MIROC6, ensemble: "r(1:10)i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}
          - {dataset: MIROC6, ensemble: "r(1:3)i1p1f1", grid: gn, exp: [hist-stratO3,ssp245-stratO3]}
#          - {dataset: NorESM2-LM, ensemble: "r(2:3)i1p1f1", grid: gn} #1 didn't work.
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-nat,ssp245-nat]}
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-GHG,ssp245-GHG]}
#          - {dataset: NorESM2-LM, ensemble: "r1i1p1f1", grid: gn, exp: [hist-aer,ssp245-aer]}


#      siconca:
#        preprocessor: regrid_5_5
#        reference_dataset: HadCRUT4
#        field: T2Ms
#        mip: SImon
#        project: CMIP6
#        exp: [historical,ssp245]
#        grid: gn
#        start_year: 1850
#        end_year: 2029
#        additional_datasets:
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:10)i1p1f2", grid: gn}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:5)i1p1f2", grid: gn, exp: [hist-nat,ssp245-nat]}
#          - {dataset: GISS-E2-1-G, ensemble: "r(1:5)i1p1f2", grid: gn, exp: [hist-GHG,ssp245-GHG]}



    scripts:
      fig1:
        script: attribute/damip_timeseries.py
        obs: had5

#Close to repeat of AR6 results, using GSAT.
      fig2_2010-19_gsat:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: false
        sr15_flag: false
        warming_years:
          - 2010
          - 2019

      fig2_2016-25_gsat:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: false
        sr15_flag: false
        warming_years:
          - 2016
          - 2025


#As above, but using SR1.5 15-yr trend endpoint approach.
      fig2_2017_sr15_gsat:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: false
        sr15_flag: true
        warming_years:
          - 2003
          - 2017

      fig2_2025_sr15_gsat:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: false
        sr15_flag: true
        warming_years:
          - 2011
          - 2025


#As above, but using GMST.
      fig2_2010-19:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: true
        sr15_flag: false
        warming_years:
          - 2010
          - 2019

      fig2_2016-25:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: true
        sr15_flag: false
        warming_years:
          - 2016
          - 2025


#As above, but using SR1.5 15-yr trend endpoint approach.
      fig2_2017_sr15:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: true
        sr15_flag: true
        warming_years:
          - 2003
          - 2017

      fig2_2025_sr15:
        script: attribute/attrib_blended.py
        obs: had5
        exp_flag: GHG
        diag_name: gmst05
        rcplot: true
        simple_uncert: false
        gmst_flag: true
        sr15_flag: true
        warming_years:
          - 2011
          - 2025
