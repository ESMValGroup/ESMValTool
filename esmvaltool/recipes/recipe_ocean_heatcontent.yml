# ESMValTool
# recipe_ocean_example.yml
---
documentation:
  description: |
    Recipe to demonstrate several simple plots based on the monthly ocean
    temperature. Please use this file as a template for adding additional
    fields into the ocean. This work based on the BGC-val toolkit GMD-2018-103.

  authors:
    - demo_le

  maintainer:
    - schl_ma

  references:
    - demora2018gmd

  projects:
    - ukesm

datasets:
  # CMIP5
  - {dataset: IPSL-CM5A-LR, project: CMIP5, ensemble: r1i1p1}
  - {dataset: HadGEM2-ES, project: CMIP5, ensemble: r1i1p1}
  - {dataset: CSIRO-Mk3-6-0, project: CMIP5, ensemble: r1i1p1}
  - {dataset: CanESM2, project: CMIP5, ensemble: r1i1p1}

#  - {dataset: HadGEM2-AO, project: CMIP5, ensemble: r1i1p1}
#  - {dataset: GISS-E2-H, project: CMIP5, ensemble: r1i1p1}
#  - {dataset: HadCM3, project: CMIP5, ensemble: r1i1p1}
#  - {dataset: CanCM4, project: CMIP5, ensemble: r1i1p1}
#  - {dataset: HadGEM2-CC, project: CMIP5, ensemble: r1i1p1}

  # CMIP6 datasets, present on ESGF@CEDA April 2019
#  - {dataset: UKESM1-0-LL, project: CMIP6, grid: gn, ensemble: r1i1p1f2}
#  - {dataset: CNRM-CM6-1, project: CMIP6, grid: gn, ensemble: r1i1p1f2}
#  - {dataset: CNRM-ESM2-1, project: CMIP6, grid: gn, ensemble: r1i1p1f2}
#  - {dataset: IPSL-CM6A-LR, project: CMIP6, grid: gn, ensemble: r1i1p1f1}
#  - {dataset: GISS-E2-1-G, project: CMIP6, grid: gr, ensemble: r1i1p1f1}
#  - {dataset: BCC-CSM2-MR, project: CMIP6, grid: gn, ensemble: r1i1p1f1}
#  - {dataset: BCC-ESM1, project: CMIP6, grid: gn, ensemble: r1i1p1f1}

#  - {dataset: CanESM5, project: CMIP6, grid: gn, ensemble: r1i1p1f1}
#  - {dataset: CESM2, project: CMIP6, grid: gn, ensemble: r1i1p1f1}
#  - {dataset: CESM2-WACCM, project: CMIP6, grid: gn, ensemble: r1i1p1f1}
#  - {dataset: EC-Earth3, project: CMIP6, grid: gn, ensemble: r1i1p1f1}
#  - {dataset: MIROC6, project: CMIP6, grid: gn, ensemble: r1i1p1f1}

  #####
  # Data with Errors right now -June 2018
  ###
  # Problem with times
#  - {dataset: MIROC-ESM, project: CMIP5, exp: historical, ensemble: r1i1p1}
#  - {dataset: MIROC-ESM-CHEM, project: CMIP5, exp: historical, ensemble: r1i1p1}

  # Unstructured grids
 # - {dataset: MPI-ESM-LR, project: CMIP5, exp: historical, ensemble: r1i1p1}
 # - {dataset: MPI-ESM-MR, project: CMIP5, exp: historical, ensemble: r1i1p1}
#  - {dataset: ACCESS1-0, project: CMIP5, exp: historical, ensemble: r1i1p1}
#  - {dataset: ACCESS1-3, project: CMIP5, exp: historical, ensemble: r1i1p1}

  # no volcello present
#  - {dataset: GFDL-ESM2M, project: CMIP5, ensemble: r1i1p1}
#  - {dataset: GFDL-CM3, project: CMIP5, ensemble: r1i1p1}


# TODO: All multi-model statistics are turned off until the preprocessor order is fixed.

preprocessors:
  # --------------------------------------------------
  # Time series preprocessors
  # --------------------------------------------------
  prep_timeseries_1: # For 2D fields
    custom_order: true
    extract_volume:
      z_min: 700.
      z_max: 0.
    annual_mean:
#    average_volume:
#      coordz: depth
#      coord1: longitude
#      coord2: latitude
#    multi_model_statistics:
#      span: overlap
#      statistics: [mean ]

diagnostics:

  # --------------------------------------------------
  # Time series diagnostics
  # --------------------------------------------------

  diag_timeseries_2:
    description: Global Ocean Depth Layers mean timeseries
    variables:
      ohc: # Temperature ocean 3D
        preprocessor: prep_timeseries_1
        derive: true
        force_derivation: false
        exp: historical
        mip: Omon
        start_year: 1970
        end_year: 2005

    scripts:
      Global_Ocean_DepthLayers_integral_timeseries: &Global_Ocean_DepthLayers_integral_timeseries
        script: ipcc_ar5/ch09_fig09_17.py
