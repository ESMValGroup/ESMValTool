###############################################################################
# recipe_C3S_51_SPQB.yml
#
# Description
# Independent assessment of single products for the C3S_511 quality brief
#
# Author
# Benjamin Mueller (LMU, Germany - b.mueller@iggf.geo.uni-muenchen.de)
# Birgit Hassler (DLR, Germany - birgit.hassler@dlr.de)
#
# Project
# C3S_511
#
# Reference

#
# This namelist is part of the ESMValTool
###############################################################################
documentation:
  description: |
    Independent assessment of single products for the C3S_511 quality brief

  authors:
    - mueller_benjamin
#    - hass_bg

  maintainer:
    - mueller_benjamin
#    - hass_bg


datasets:
  - {dataset: MRI-CGCM3,  project: CMIP5,  mip: Amon,  exp: decadal1980,  ensemble: r1i1p1,  start_year: 1991,  end_year: 2000} #1991
#  - {dataset: CDS-XCH4, type: sat, project: OBS,  version: L3, mip: Amon, tier: 3, start_year: 2003,  end_year: 2016} 
#  - {dataset: CDS-SATELLITE-ALBEDO, type: sat, project: OBS, mip: Lmon, version: L3, tier: 3, start_year: 1999,  end_year: 2013}
preprocessors:
  noop: {}
  
  regrid30:
      regrid:
        target_grid: 30x30
        scheme: nearest
        
  regrid2:
      regrid:
        target_grid: 2x2
        scheme: nearest

diagnostics:
  SPQB:
    description: Single product quality brief.
    variables:
#      bdalb:
      ta:
#      xch4:
        preprocessor: regrid30
    scripts:
      diag_O_info:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [info, GCOS]
      diag_O_avail:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [availability]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_O_hist:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [histogram]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_MV_ts:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [time_series]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_MV_mean:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [mean]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_MV_std_dev:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [std_dev]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_MV_perc:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [percentiles]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_MV_clim:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [climatology]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_MV_anom:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [anomalies]
        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_T_trend: #worst for memory
        script: qualassess/DUMMY_C3S_511_SPQB.py
        requests: [lintrend]
        levels: [3.00e+04,8.50e+04,1.00e+02]
#      diag_custom:
#        script: qualassess/DUMMY_C3S_511_SPQB.py
#        requests: [custom]
##        levels: [3.00e+04,8.50e+04,1.00e+02]
      diag_tables:
        script: qualassess/DUMMY_C3S_511_SPQB.py
#        requests: [SMM, GCOS, ESM]
        requests: [SMM, ESM]
      report:
        script: qualassess/DUMMY_C3S_511_SPQB.py
        ancestors: ['ta', '*/diag_*']
        requests: [report]
        order: [diag_O_info, diag_tables, diag_O_hist, diag_O_avail,
                diag_MV_ts, diag_MV_mean, diag_MV_std_dev, diag_MV_perc, 
                diag_MV_clim, diag_MV_anom, diag_T_trend]#, diag_custom]
#        order: [diag_tables, diag_MV_ts, diag_MV_mean ,diag_MV_std_dev, diag_MV_clim, diag_MV_anom, diag_custom]
#        order: [diag_tables, diag_MV_mean]
#        order: [diag_MV_ts, iag_MV_mean, diag_MV_std_dev]
        show_latex: False #options are: True/False/no_latex
##        

#diagnostics:
#  SPQB:
#    description: Single product quality brief.
#    variables:
##      bdalb:
#      ta:
##      xch4:
#        preprocessor: noop
#    scripts:
#      diag_rest:
#        script: qualassess/DUMMY_C3S_511_SPQB.py
#        requests: [info, GCOS, SMM, ESM, availability, histogram, mean, std_dev, percentiles, lintrend]
#        levels: [3.00e+04,8.50e+04,1.00e+02]
#      diag_clim:
#        script: qualassess/DUMMY_C3S_511_SPQB.py
#        requests: [climatology, anomalies]
#        levels: [3.00e+04,8.50e+04,1.00e+02]
#      diag_lin:
#        script: qualassess/DUMMY_C3S_511_SPQB.py
#        requests: [time_series]
#        levels: [3.00e+04,8.50e+04,1.00e+02]
#      report:
#        script: qualassess/DUMMY_C3S_511_SPQB.py
#        ancestors: ['ta', '*/diag_*']
#        requests: [report]
#        order: [diag_rest, diag_lin, diag_clim]
#        show_latex: False #options are: True/False/no_latex

#  diagnostic1:
#    description: Multi-product quality brief.
#    variables:
#      additional_datasets:
#        - {dataset: ATSR,  project: obs4mips,  level: L3,  version: ARC-v1.1.1,  start_year: 2001,  end_year: 2003, tier: 3}
#      ta:
#        preprocessor: noop
#        field: T3Ms
#    scripts:
#      script0:
#        script: qualassess/DUMMY_C3S_511_MPQB.py
#        data_colors: RdYlGn
#        levels: [30000.,10000.]
#        show_latex: False
